
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å‡æœŸç®¡ç†å°å·¥å…·</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    input, select, button { margin: 5px; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .section { margin-bottom: 30px; }
  </style>
</head>
<body>

  <h2>ğŸ—“ å‡æœŸç®¡ç†å°å·¥å…·</h2>

  <div class="section">
    <h3>è¨­å®šåˆå§‹å‡æœŸå¤©æ•¸</h3>
    ç‰¹ä¼‘: <input id="annualInput" type="number" step="0.5" value="10">
    è£œä¼‘: <input id="compInput" type="number" step="0.5" value="2.5">
    ç—…å‡: <input id="sickInput" type="number" step="0.5" value="7">
    <button onclick="setBalances()">è¨­å®š</button>
  </div>

  <div class="section">
    <h3>æ–°å¢è«‹å‡ç´€éŒ„</h3>
    å‡åˆ¥:
    <select id="typeSelect">
      <option value="annual">ç‰¹ä¼‘</option>
      <option value="comp">è£œä¼‘</option>
      <option value="sick">ç—…å‡</option>
    </select>
    æ—¥æœŸ: <input id="dateInput" type="date">
    æ™‚æ®µ:
    <select id="timeSelect">
      <option value="å…¨å¤©">å…¨å¤©</option>
      <option value="ä¸Šåˆ">ä¸Šåˆ</option>
      <option value="ä¸‹åˆ">ä¸‹åˆ</option>
    </select>
    <button onclick="addLeave()">æ–°å¢</button>
  </div>

  <div class="section">
    <h3>å‰©é¤˜å‡æœŸ</h3>
    <p id="balanceText">è«‹å…ˆè¨­å®šå‡æœŸ</p>
  </div>

  <div class="section">
    <h3>è«‹å‡ç´€éŒ„</h3>
    <table id="leaveTable">
      <thead>
        <tr>
          <th>å‡åˆ¥</th>
          <th>æ—¥æœŸ</th>
          <th>æ™‚æ®µ</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let balances = { annual: 0, comp: 0, sick: 0 };
    let leaves = [];

    function setBalances() {
      balances.annual = parseFloat(document.getElementById("annualInput").value);
      balances.comp = parseFloat(document.getElementById("compInput").value);
      balances.sick = parseFloat(document.getElementById("sickInput").value);
      leaves = [];
      updateUI();
    }

    function addLeave() {
      const type = document.getElementById("typeSelect").value;
      const date = document.getElementById("dateInput").value;
      const time = document.getElementById("timeSelect").value;
      if (!date) return alert("è«‹é¸æ“‡æ—¥æœŸ");

      const hours = time === "å…¨å¤©" ? 1 : 0.5;
      if (balances[type] < hours) {
        alert("å‡æœŸä¸è¶³ï¼");
        return;
      }

      balances[type] -= hours;
      leaves.push({ type, date, time, hours });
      updateUI();
    }

    function deleteLeave(index) {
      const leave = leaves[index];
      balances[leave.type] += leave.hours;
      leaves.splice(index, 1);
      updateUI();
    }

    function updateUI() {
      document.getElementById("balanceText").innerText = 
        `ç‰¹ä¼‘ï¼š${balances.annual.toFixed(1)} å¤©ï½œè£œä¼‘ï¼š${balances.comp.toFixed(1)} å¤©ï½œç—…å‡ï¼š${balances.sick.toFixed(1)} å¤©`;

      const tbody = document.getElementById("leaveTable").querySelector("tbody");
      tbody.innerHTML = "";
      leaves.forEach((leave, i) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${mapLabel(leave.type)}</td>
          <td>${leave.date}</td>
          <td>${leave.time}</td>
          <td><button onclick="deleteLeave(${i})">åˆªé™¤</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    function mapLabel(key) {
      return { annual: "ç‰¹ä¼‘", comp: "è£œä¼‘", sick: "ç—…å‡" }[key];
    }
  </script>

</body>
</html>
